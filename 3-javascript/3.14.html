<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Javascript - Functions</title>
    </head>

    <body>
        <p>How many fingers are you holding up?</p>

        <p>
            <select id="myNumber">
                <option>0</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
            </select>

            <button id="guess">Guess!</button>
        </p>

        <script type="text/javascript">
            document.getElementById("guess").onclick = function () {
                const myNumber = document.getElementById("myNumber").value;

                // this is a closure.
                const incrGuesses = (() => {
                    let i = 1; // plays the role of an static variable.
                    return () => i++;
                })();

                function doAGuess(correctAnswer) {
                    const len = document.getElementById("myNumber").length;
                    const guess = Math.floor(len * Math.random());
                    incrGuesses();
                    return guess == correctAnswer;
                }

                while (!doAGuess(myNumber));

                alert(
                    `Got it! It was a ${myNumber}. It took me ${
                        incrGuesses() - 1
                    } guesses.`,
                );
            };
        </script>
    </body>
</html>
