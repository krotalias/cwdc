<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Javascript - While</title>
    </head>

    <body>
        <label for="decimal">Enter a Whole Number</label> or
        <label for="roman">Roman Number</label>
        <p>
            <input
                type="number"
                id="decimal"
                name="decimal"
                min="1"
                max="3999999"
                value="1"
                autofocus
                autocomplete="off"
            />

            <label for="roman"></label>
            <input
                type="text"
                id="roman"
                name="roman"
                value="I"
                autocomplete="off"
            />
        </p>

        <p>
            <button id="decimalButton">to roman &rarr;</button>
            <button id="romanButton">&larr; to decimal</button>
        </p>

        <p id="answer" style="font-size: 300%"></p>

        <script type="module">
            import {
                int2roman,
                int2romanFast,
                roman2int,
                validateRoman,
            } from "./roman/roman.js";

            let blink = document.getElementById("answer");
            let decimal = document.getElementById("decimal");
            let roman = document.getElementById("roman");
            document.getElementById("decimalButton").onclick = function () {
                let r = int2roman(decimal.value);
                blink.innerHTML = r;
                roman.value = r;
            };
            document.getElementById("romanButton").onclick = function () {
                let val = validateRoman(roman.value);
                let d;
                if (val.length > 0) {
                    d = `Exception ${val} : Invalid roman "${roman.value}"`;
                } else {
                    d = roman2int(roman.value);
                }
                blink.innerHTML = d;
                decimal.value = d;
            };
            setInterval(() => {
                blink.style.opacity ^= 1;
            }, 1000);
        </script>
    </body>
</html>
