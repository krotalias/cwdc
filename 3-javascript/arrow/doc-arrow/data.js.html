<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: data.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: data.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file
 *
 * Summary.
 *
 * &lt;p>Adjusting "this" when a method is assigned to a variable.&lt;/p>
 *
 * In JavaScript, there's always a global object defined.&lt;br>
 * In a web browser, when scripts create global variables defined with the var keyword,&lt;br>
 * they're created as members of the global object (Window).
 * &lt;p>In Node.js this is not the case. The global object is called global.&lt;/p>
 *
 * @see &lt;a href="/cwdc/3-javascript/arrow/data.js">source&lt;/a>
 * @see &lt;a href="/cwdc/3-javascript/arrow/data.html">link&lt;/a>
 * @see https://desenvolvimentoparaweb.com/javascript/this-javascript-dominando/
 * @see https://modernweb.com/understanding-scope-and-context-in-javascript/
 */

/**
 * &lt;p>A global data array.&lt;/p>
 * The global object in a web browser is the window object,
 * and in node, it is called global.
 *
 * &lt;p>The {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis globalThis}
 * global property allows one to access the global object
 * regardless of the current environment.&lt;/p>
 * @type {Array&lt;{name: String, age: Number}>}
 * @global
 */
globalThis.data = [
  { name: "Samantha", age: 12 },
  { name: "Alexis", age: 14 },
];

/**
 *
 * &lt;p>Solution to set "this" when a method is assigned to a variable.&lt;/p>
 *
 * It is possible to solve the issue by setting "this" via the
 * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind bind} method.
 * @type {Object&lt;{data: Array&lt;{name: String, age: Number}>, showData: function}>}
 * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis
 */
var user = {
  // "data" is a property of "user" object
  data: [
    { name: "T. Woods", age: 37 },
    { name: "P. Mickelson", age: 43 },
  ],
  showData: function (event) {
    // Random number: 0 or 1
    let randomNum = ((Math.random() * 2) | 0) + 1 - 1;

    console.log(this.data);

    // print a random person from "data" array
    const { name, age } = this.data[randomNum];
    console.log(`${name} ${age}`);

    if (typeof document != "undefined") {
      let rdiv = document.querySelector("#result");
      rdiv.innerHTML += `${name} ${age}&lt;br>`;
    }
  },
};

/**
 * &lt;p>Displays a random user in the console and in the Browser,
 * if there is a Document object.&lt;/p>
 * &lt;p>It should be noted that "this" is set to the object that called the function.&lt;/p>
 * However, when a function is assigned to a variable,
 * we need to bind the function. &lt;br>
 * Otherwise, "this" is assigned to the global object.
 * @function
 */
var showGuserData = user.showData.bind(globalThis);
var showUserData = user.showData.bind(user);

/**
 * When "showGUserData" is executed,
 * the values shown are from "data" in the
 * global context, not the one from the array in "user".
 * &lt;ul>
 *  &lt;li>In strict mode it is undefined.&lt;/li>
 *  &lt;li>node has no Document or Window.&lt;/li>
 * &lt;/ul>
 */
showGuserData(); // "Samantha 12"
showUserData(); // "T. Woods 37"
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Article.html">Article</a></li><li><a href="Person.html">Person</a></li><li><a href="Person2.html">Person2</a></li></ul><h3>Global</h3><ul><li><a href="global.html#appController">appController</a></li><li><a href="global.html#article">article</a></li><li><a href="global.html#bob">bob</a></li><li><a href="global.html#data">data</a></li><li><a href="global.html#gameController">gameController</a></li><li><a href="global.html#players">players</a></li><li><a href="global.html#playersclickArrow">playersclickArrow</a></li><li><a href="global.html#playersclickHandler">playersclickHandler</a></li><li><a href="global.html#playersclickHandler2">playersclickHandler2</a></li><li><a href="global.html#showGuserData">showGuserData</a></li><li><a href="global.html#sumNumbers">sumNumbers</a></li><li><a href="global.html#user">user</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Mon Apr 10 2023 06:51:42 GMT-0300 (Brasilia Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
