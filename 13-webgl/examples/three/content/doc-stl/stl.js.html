<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: stl.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: stl.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file
 *
 * Summary.
 *
 * &lt;p>STL, OBJ, VTK and GLTF Viewer.&lt;/p>
 * Uses {@link external:THREE Three.js} to load, display, and manipulate a model read from a file.
 * The center of the model bounding box is translated to the origin so a trackball can rotate the model.
 * &lt;p>Three file formats are currently supported:&lt;/p>
 * &lt;ol>
 * &lt;li>{@link https://en.wikipedia.org/wiki/STL_(file_format) STL}
 * is a file format commonly used for 3D printing and computer-aided design (CAD).
 * The name STL is an acronym that stands for stereolithography — a popular 3D printing technology.
 * You might also hear it referred to as Standard Triangle Language or Standard Tessellation Language.&lt;/li>
 *
 * &lt;li>{@link https://en.wikipedia.org/wiki/Wavefront_.obj_file OBJ}
 * (or .OBJ) is a geometry definition file format first developed by Wavefront Technologies
 * for its Advanced Visualizer animation package.
 * The file format is open and has been adopted by other 3D graphics application vendors.
 * &lt;p>{@link external:THREE.MTLLoader MTL file}, short for Material Template Library, is companion file format used in 3D computer graphics and modeling.
 * It is often associated with Wavefront OBJ file format,
 * which is common format for storing 3D models and their associated materials and textures.&lt;/p>
 * &lt;/li>
 *
 * &lt;li>{@link https://docs.vtk.org/en/latest/design_documents/VTKFileFormats.html VTK}
 * provides a number of source and writer objects to read and write popular data file formats.
 * The Visualization Toolkit also provides some of its own file formats.
 * The main reason for creating yet another data file format is to offer a consistent data representation scheme
 * for a variety of dataset types, and to provide a simple method to communicate data between software.&lt;/li>
 *
 * &lt;li>{@link https://en.wikipedia.org/wiki/GlTF GLTF}
 * glTF (Graphics Library Transmission Format or GL Transmission Format and formerly known as WebGL Transmissions Format or WebGL TF)
 * is a standard file format for three-dimensional scenes and models.
 * A glTF file uses one of two possible file extensions: .gltf (JSON/ASCII) or .glb (binary).
 * Both .gltf and .glb files may reference external binary and texture resources.&lt;/li>
 *
 * &lt;/ol>
 *
 * @author Paulo Roma Cavalcanti
 * @license Licensed under the {@link https://www.opensource.org/licenses/mit-license.php MIT license}.
 * @see &lt;a href="/cwdc/13-webgl/examples/three/content/stl.html">link&lt;/a>
 * @see &lt;a href="/cwdc/13-webgl/examples/three/content/stl.js">source&lt;/a>
 * @see {@link https://www.adobe.com/creativecloud/file-types/image/vector/stl-file.html#what-is-an-stl-file STL files}
 * @see {@link https://docs.fileformat.com/3d/mtl/ What is an MTL file?}
 * @see &lt;iframe title="Cube in a Dodecahedron" src="/cwdc/13-webgl/examples/three/content/stl.html" style="transform: scale(0.85); width: 380px; height: 380px">&lt;/iframe>
 */

"use strict";

import * as THREE from "three";
import { STLLoader } from "three/addons/loaders/STLLoader.js";
import { VTKLoader } from "three/addons/loaders/VTKLoader.js";
import { OBJLoader } from "three/addons/loaders/OBJLoader.js";
import { MTLLoader } from "three/addons/loaders/MTLLoader.js";
import { GLTFLoader } from "three/addons/loaders/GLTFLoader.js";
import { DRACOLoader } from "three/addons/loaders/DRACOLoader.js";
import { RoomEnvironment } from "three/addons/environments/RoomEnvironment.js";
import { TrackballControls } from "three/addons/controls/TrackballControls.js";
import Stats from "three/addons/libs/stats.module.js";
import { MeshEdgesGeometry } from "./MeshEdgesGeometry.js";

const drpath = "https://unpkg.com/three@latest/examples/jsm/libs/draco/gltf/";

/**
 * Three.js module.
 * @external THREE
 * @see {@link https://threejs.org/docs/#manual/en/introduction/Installation Installation}
 * @see {@link https://discoverthreejs.com DISCOVER three.js}
 * @see {@link https://riptutorial.com/ebook/three-js Learning three.js}
 */

/**
 * &lt;p>A representation of mesh, line, or point geometry.&lt;/p>
 * Includes vertex positions, face indices, normals, colors, UVs,
 * and custom attributes within buffers, reducing the cost of
 * passing all this data to the GPU.
 * @class BufferGeometry
 * @memberof external:THREE
 * @see https://threejs.org/docs/#api/en/core/BufferGeometry
 */

/**
 * Loads the viewer and starts the animation.
 */
function init() {
  const canvas = document.getElementById("canvasid");

  /**
   * Color names mapping.
   * @type {Object&lt;String:hexadecimal>}
   * @global
   */
  const colorTable = {
    gold: 0xffd700,
    antiqueWhite: 0xfaebd7,
    white: 0xffffff,
    grey: 0xfcfcfc,
  };

  // default model
  const defModel = document
    .getElementById("models")
    .querySelector("[selected]");

  /**
   * Array holding model file names to create models from.
   * @type {Array&lt;String>}
   * @global
   */
  const models = [defModel ? defModel.text : ""];

  /**
   * Selected model number.
   * @type {Number}
   * @global
   */
  let modelCnt = defModel ? +defModel.value : 0;

  /**
   * The AnimationMixer is a player for animations on a particular object in the scene.
   * When multiple objects in the scene are animated independently,
   * one AnimationMixer may be used for each object.
   * @class AnimationMixer
   * @memberof external:THREE
   * @see {@link https://threejs.org/docs/#api/en/animation/AnimationMixer Animation Mixer}
   */
  let mixer;

  /**
   * Object for keeping track of time. This uses performance.now if it is available,
   * otherwise it reverts to the less accurate Date.now.
   * @class Clock
   * @memberof external:THREE
   * @see {@link https://threejs.org/docs/#api/en/core/Clock Clock}
   */
  const clock = new THREE.Clock();

  /**
   * Get model file names from an html &amp;lt;select&amp;gt; element
   * identified by "models".
   * @param {Array&lt;String>} optionNames array of model file names.
   * @global
   */
  function getModels(optionNames) {
    optionNames.length = 0;
    const selectElement = document.getElementById("models");
    [...selectElement.options].map((o) => optionNames.push(o.text));
  }

  /**
   * Set model file names of an html &amp;lt;select&amp;gt; element identified by "models".
   * @param {Array&lt;String>} optionNames array of model file names.
   * @global
   */
  function setModels(optionNames) {
    const sel = document.getElementById("models");

    let options_str = "";

    optionNames.forEach((img, index) => {
      options_str += `&lt;option value="${index}">${img}&lt;/option>`;
    });

    sel.innerHTML = options_str;
  }

  /**
   * The WebGL renderer displays your beautifully crafted scenes using WebGL.
   * @class WebGLRenderer
   * @memberof external:THREE
   * @see https://threejs.org/docs/#api/en/renderers/WebGLRenderer
   */
  const renderer = new THREE.WebGLRenderer({
    canvas: canvas,
    antialias: true,
  });

  /**
   * Canvas aspect ratio.
   * @type {Number}
   * @global
   */
  const aspect = canvas.clientWidth / canvas.clientHeight;

  renderer.setPixelRatio(window.devicePixelRatio);
  // to avoid aliasing
  renderer.setSize(canvas.clientWidth, canvas.clientHeight);

  /**
   * Camera that uses perspective projection.
   * @class PerspectiveCamera
   * @memberof external:THREE
   * @see https://threejs.org/docs/#api/en/cameras/PerspectiveCamera
   */
  const camera = new THREE.PerspectiveCamera(45, aspect, 0.01, 1000);
  handleWindowResize();

  /**
   * &lt;p>TrackballControls is similar to OrbitControls.&lt;/p>
   * However, it does not maintain a constant camera up vector.
   * That means if the camera orbits over the “north” and “south” poles,
   * it does not flip to stay "right side up".
   * @class TrackballControls
   * @memberof external:THREE
   * @see https://threejs.org/docs/#examples/en/controls/TrackballControls
   */
  const controls = new TrackballControls(camera, canvas);
  controls.rotateSpeed = 5.0;
  controls.zoomSpeed = 5;
  controls.panSpeed = 2;
  controls.noZoom = false;
  controls.noPan = false;
  controls.staticMoving = true;
  controls.dynamicDampingFactor = 0.3;
  controls.maxDistance = 3000;
  controls.minDistance = 0;
  controls.handleResize();

  /**
   * &lt;p>Scenes allow you to set up what and where is to be rendered by three.js.&lt;/p>
   * This is where you place objects, lights and cameras.
   * @class Scene
   * @memberof external:THREE
   * @see https://threejs.org/docs/#api/en/scenes/Scene
   */
  const scene = new THREE.Scene();
  scene.add(camera);

  // light
  const ambLight = new THREE.AmbientLight(colorTable.white, 3);

  const dirLight = new THREE.DirectionalLight(colorTable.white, 1.5);
  dirLight.position.set(200, 200, 1000);
  camera.add(dirLight.target);

  // model material
  const material = new THREE.MeshLambertMaterial({
    color: colorTable.gold,
    side: THREE.DoubleSide,
  });

  // edge material
  const edgeMaterial = new THREE.LineBasicMaterial({ color: 0xffffff });

  /**
   * The STL model format is widely used for rapid prototyping, 3D printing and computer-aided manufacturing.
   * @class STLLoader
   * @memberof external:THREE
   * @see {@link https://sbcode.net/threejs/loaders-stl/ STL Model Loader}
   * @see {@link https://blog.arashtad.com/blog/load-stl-3d-models-in-three-js/ How to load STL 3d models in Three JS}
   */
  const stl_loader = new STLLoader();

  /**
   * VTK data sets can contain several types of lattice data and/or geometric figures.
   * The content of VTK files can be in ASCII text format or a mixed binary/ASCII format
   * in which headers and parameters are in ASCII format but the data values are in binary format.
   * @class VTKLoader
   * @memberof external:THREE
   * @see {@link https://threejs.org/examples/webgl_loader_vtk.html VTK Model Loader}
   */
  const vtk_loader = new VTKLoader();

  /**
   * &lt;p>A loader for loading a .obj resource.&lt;/p>
   * The OBJ file format is a simple data-format that represents 3D geometry in a
   * human readable format as the position of each vertex,
   * the UV position of each texture coordinate vertex, vertex normals,
   * and the faces that make each polygon defined as a list of vertices, and texture vertices.
   * @class OBJLoader
   * @memberof external:THREE
   * @see {@link https://threejs.org/docs/#examples/en/loaders/OBJLoader obj_loader Model Loader}
   * @see {@link https://imagetostl.com/convert/file/glb/to/obj Convert Your 3D Mesh/Model GLB Files to OBJ}
   */
  const obj_loader = new OBJLoader();

  /**
   * &lt;p>A loader for loading an .mtl resource, used internally by OBJLoader.&lt;/p>
   * The Material Template Library format (MTL) or .MTL File Format is a
   * companion file format to .OBJ that describes surface shading (material)
   * properties of objects within one or more .OBJ files.
   * @class MTLLoader
   * @memberof external:THREE
   * @see {@link https://threejs.org/docs/#examples/en/loaders/MTLLoader mtl_loader Material Loader}
   * @see {@link https://paulbourke.net/dataformats/mtl/ MTL material format (Lightwave, OBJ)}
   */
  const mtl_loader = new MTLLoader();

  /**
   * &lt;p>A loader for geometry compressed with the Draco library.&lt;/p>
   * Draco is an open source library for compressing and decompressing 3D meshes and point clouds.
   * Compressed geometry can be significantly smaller, at the cost of additional decoding time on the client device.
   * @class DRACOLoader
   * @memberof external:THREE
   * @see {@link https://threejs.org/docs/#examples/en/loaders/DRACOLoader DRACO Loader}
   * @see {@link https://opensource.googleblog.com/2017/01/introducing-draco-compression-for-3d.html Google Open Source Blog}
   * @see {@link https://github.com/google/draco github}
   */
  const draco_loader = new DRACOLoader();
  draco_loader.setDecoderPath(drpath);

  /**
   * &lt;p>A loader for glTF 2.0 resources.&lt;/p>
   glTF (GL Transmission Format) is an open format specification for efficient delivery and loading of 3D content.
   Assets may be provided either in JSON (.gltf) or binary (.glb) format. External files store textures (.jpg, .png)
   and additional binary data (.bin). A glTF asset may deliver one or more scenes,
   including meshes, materials, textures, skins, skeletons, morph targets, animations, lights, and/or cameras.
   * @class GLTFLoader
   * @memberof external:THREE
   * @see {@link https://threejs.org/docs/#examples/en/loaders/GLTFLoader GLTF Loader}
   */
  const gltfl_loader = new GLTFLoader();
  gltfl_loader.setDRACOLoader(draco_loader);

  /**
   * This class generates a Prefiltered, Mipmapped Radiance Environment Map (PMREM)
   * from a cubeMap environment texture.
   * This allows different levels of blur to be quickly accessed based on material roughness.
   * Unlike a traditional mipmap chain, it only goes down to the LOD_MIN level (above),
   * and then creates extra even more filtered 'mips' at the same LOD_MIN resolution,
   * associated with higher roughness levels.
   * In this way we maintain resolution to smoothly interpolate diffuse lighting while
   * limiting sampling computation.
   * @class PMREMGenerator
   * @memberof external:THREE
   * @see {@link https://threejs.org/docs/#api/en/extras/PMREMGenerator PMREMGenerator}
   */
  const pmremGenerator = new THREE.PMREMGenerator(renderer);
  scene.background = new THREE.Color(colorTable.antiqueWhite);
  scene.environment = pmremGenerator.fromScene(
    new RoomEnvironment(renderer),
    0.04,
  ).texture;

  let diag = 0;
  let mesh = undefined;
  let line = undefined;
  // .obj file
  let lines = [];
  let object = undefined;

  /**
   * Callback to load a model from a file to the scene.
   * @param {external:THREE.BufferGeometry} geometry model.
   * @global
   */
  function loadModel(geometry) {
    // console.log(geometry);

    let vis = undefined;
    if (mesh) {
      scene.remove(mesh);
      mesh.geometry.dispose();
      mesh = undefined;
    }
    if (line) {
      scene.remove(line);
      line.geometry.dispose();
      vis = line.visible;
      line = undefined;
    }
    if (lines.length > 0) {
      for (const line of lines) {
        scene.remove(line);
        line.geometry.dispose();
      }
      vis = lines[0].visible;
      lines = [];
    }
    if (object) {
      scene.remove(object);
      object.traverse(function (child) {
        if (child.isMesh) {
          child.geometry.dispose();
        }
      });
      object = undefined;
      scene.remove(ambLight);
    }
    camera.remove(dirLight);
    if (geometry.isBufferGeometry) {
      // stl, vtk
      geometry.center();
      geometry.computeVertexNormals();
      geometry.computeBoundingBox();
      diag = geometry.boundingBox.max.distanceTo(geometry.boundingBox.min);

      mesh = new THREE.Mesh(geometry, material);
      mesh.position.set(0, 0, 0);
      scene.add(mesh);

      const edges = new THREE.EdgesGeometry(geometry);
      line = new THREE.LineSegments(edges, edgeMaterial);
      scene.add(line);
      camera.add(dirLight);
      line.visible = vis ? vis : false;
    } else if (geometry.scene) {
      // gltf file
      const model = geometry.scene;
      const bb = new THREE.Box3().setFromObject(model);
      diag = bb.max.distanceTo(bb.min);
      const center = new THREE.Vector3();
      bb.getCenter(center);
      // Nerfertiti.glb - what a hack!!
      if (geometry.asset.generator.includes("MOPS CLI")) {
        model.traverse(function (child) {
          if (child.isMesh) {
            child.material.normalMapType = THREE.ObjectSpaceNormalMap;
            child.geometry.deleteAttribute("normal");
            child.material.side = THREE.DoubleSide;
            console.log(child.name);
          }
        });
      }
      model.position.set(...center.negate());
      try {
        line = new THREE.LineSegments(
          new MeshEdgesGeometry(model),
          edgeMaterial,
        );
      } catch (error) {
        console.error(error);
        return;
      }
      line.visible = vis ? vis : false;
      scene.add(line);
      scene.add(model);
      scene.add(ambLight);
      object = model;
      if (geometry.animations[0]) {
        mixer = new THREE.AnimationMixer(model);

        if (geometry.animations[3]) {
          // Soldier.glb
          mixer
            .clipAction(geometry.animations[0])
            .setEffectiveWeight(0.0)
            .play();
          mixer
            .clipAction(geometry.animations[3])
            .setEffectiveWeight(1.0)
            .play();
          mixer
            .clipAction(geometry.animations[1])
            .setEffectiveWeight(0.0)
            .play();
        } else {
          mixer.clipAction(geometry.animations[0]).play();
        }
      }
    } else {
      // OBJ file
      const bb = new THREE.Box3().setFromObject(geometry);
      diag = bb.max.distanceTo(bb.min);
      const center = new THREE.Vector3();
      bb.getCenter(center);

      geometry.position.set(...center.negate());
      try {
        line = new THREE.LineSegments(
          new MeshEdgesGeometry(geometry),
          edgeMaterial,
        );
      } catch (error) {
        console.error(error);
        return;
      }
      line.visible = vis ? vis : false;
      scene.add(line);
      scene.add(geometry);
      if (
        ["male02.mtl", "littlesttokyo.mtl"].some(
          (str) => str === geometry.materialLibraries[0],
        )
      ) {
        scene.add(ambLight);
      }
      camera.add(dirLight);
      object = geometry;
    }
    handleKeyPress(createEvent("o"));
  }

  /**
   * &lt;p>When developing a Three.js application,
   * it is useful to understand how the performance changes as the code is developed.&lt;/p>
   * To achieve this purpose, a statistics panel can be added to the HTML document that outlines several properties,
   * such as the frames per second and how long a section of code takes to execute.
   * @class Stats
   * @memberof external:THREE
   * @see {@link https://sbcode.net/threejs/stats-panel/ Stats Panel}
   * @see {@link https://www.tutorialspoint.com/threejs/threejs_stats.htm Three.js - Stats}
   */
  const stats = new Stats();
  stats.domElement.style.position = "absolute";
  stats.domElement.style.left = "10px";
  stats.domElement.style.top = "10px";
  document.body.appendChild(stats.dom);
  stats.dom.style.display = "none";

  /**
   * &lt;p>A built in function that can be used instead of
   * {@link https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame requestAnimationFrame}.&lt;/p>
   * The {@link https://threejs.org/docs/#api/en/renderers/WebGLRenderer.setAnimationLoop renderer.setAnimationLoop}
   * parameter is a {@link runAnimation callback}, which
   * will be called every available frame.&lt;br>
   * If null is passed, it will stop any already ongoing animation.
   * @param {function} loop callback.
   * @function
   * @name setAnimationLoop
   * @global
   */
  renderer.setAnimationLoop(() => {
    runAnimation();
  });

  /**
   * &lt;p>Animation loop.&lt;/p>
   * Updates {@link external:THREE.TrackballControls controls},
   * renders the {@link external:THREE.Scene scene} and updates {@link external:THREE.Stats statistics}.
   * @global
   */
  function runAnimation() {
    const delta = clock.getDelta();
    if (mixer) mixer.update(delta);
    controls.update();
    renderer.render(scene, camera);
    stats.update();
  }

  /**
   * &lt;p>Closure for keydown events.&lt;/p>
   * @function
   * @global
   * @return {key_event} callback for handling a keyboard event.
   */
  const handleKeyPress = (() => {
    const mod = (n, m) => ((n % m) + m) % m;
    let visible = false;
    const modelPath = "models";

    /**
     * &lt;p>Handler for keydown events.&lt;/p>
     * Selects the next/previous {@link models model}
     * or turns {@link external:THREE.Stats stats} and mesh visible/invisible
     * when pressing keys ("n","N") or ("s","m"), respectively.&lt;br>
     * @param {KeyboardEvent} event keyboard event.
     * @callback key_event callback to handle a key pressed.
     */
    return (event) => {
      const ch = event.key;
      switch (ch) {
        case "n":
        case "N":
        case "k":
          if (ch == "k") {
            modelCnt = +document.getElementById("models").value;
          } else {
            const incr = ch == "n" ? 1 : -1;
            modelCnt = mod(modelCnt + incr, models.length);
            document.getElementById("models").value = modelCnt;
          }
          const model = models[modelCnt];
          if (model.includes(".vtk")) {
            vtk_loader.load(`${modelPath}/vtk/${model}`, loadModel);
          } else if (model.includes(".stl")) {
            stl_loader.load(`${modelPath}/stl/${model}`, loadModel);
          } else if (model.includes(".glb") || model.includes(".gltf")) {
            gltfl_loader.load(`${modelPath}/glb/${model}`, loadModel);
          } else {
            if (model === "LittlestTokyo.obj") {
              mtl_loader.setMaterialOptions({ side: THREE.FrontSide });
            } else {
              mtl_loader.setMaterialOptions({ side: THREE.DoubleSide });
            }
            mtl_loader.load(
              `${modelPath}/obj/${model}`.replace(".obj", ".mtl"),
              (materials) => {
                materials.preload();
                obj_loader.setMaterials(materials);
                obj_loader.load(`${modelPath}/obj/${model}`, loadModel);
              },
            );
          }
          break;
        case "s":
          visible = !visible;
          if (visible) stats.dom.style.display = "block";
          else stats.dom.style.display = "none";
          document.getElementById("stats").checked = visible;
          break;
        case "m":
          if (line) line.visible = !line.visible;
          if (lines.length > 0) {
            for (const line of lines) {
              line.visible = !line.visible;
            }
          }
          document.getElementById("mesh").checked = line.visible;
          break;
        case "o":
          controls.reset();
          // 1.6 is enough, but dont't forget the zoom out
          camera.far = diag * 5;
          camera.near = diag * 0.05;
          camera.position.set(0, 0, diag * 1.1);
          controls.maxDistance = camera.far;
          camera.updateProjectionMatrix();
          break;
      }
    };
  })();

  /**
   * Returns a new keyboard event
   * that can be passed to {@link handleKeyPress}.
   * @param {String} key char code.
   * @returns {KeyboardEvent} a keyboard event.
   */
  const createEvent = (key) => {
    const code = key.charCodeAt();
    return new KeyboardEvent("keydown", {
      key: key,
      which: code,
      charCode: code,
      keyCode: code,
    });
  };

  /**
   * &lt;p>Fires when the document view (window) has been resized.&lt;/p>
   * Also resizes the canvas and viewport.
   * @callback handleWindowResize
   * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/resize_event
   */
  function handleWindowResize() {
    let h = window.innerHeight - 20;
    let w = window.innerWidth - 20;
    if (h > w) {
      h = w / aspect;
    } else {
      w = h * aspect;
    }
    renderer.setSize(w, h);
    camera.aspect = aspect;
    camera.updateProjectionMatrix();
  }

  /**
   * &lt;p>Appends an event listener for events whose type attribute value is resize.&lt;/p>
   * &lt;p>The {@link handleWindowResize callback} argument sets the callback
   * that will be invoked when the event is dispatched.&lt;/p>
   * @param {Event} event the document view is resized.
   * @param {callback} function function to run when the event occurs.
   * @param {Boolean} useCapture handler is executed in the bubbling or capturing phase.
   * @event resize - executed when the window is resized.
   */
  window.addEventListener("resize", handleWindowResize, false);

  /**
   * &lt;p>Appends an event listener for events whose type attribute value is keydown.&lt;br>
   * The {@link handleKeyPress callback} argument sets the callback that will be invoked when
   * the event is dispatched.&lt;/p>
   *
   * @event keydown
   */
  window.addEventListener("keydown", (event) => {
    if (
      ["Space", "ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"].indexOf(
        event.code,
      ) > -1
    ) {
      event.preventDefault();
    }
    handleKeyPress(event);
  });

  /**
   * &lt;p>Appends an event listener for events whose type attribute value is change.&lt;br>
   * The {@link handleKeyPress callback} argument sets the callback that will be invoked when
   * the event is dispatched.&lt;/p>
   *
   * @event change - executed when the models &amp;lt;select&amp;gt; is changed.
   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event
   */
  document
    .getElementById("models")
    .addEventListener("change", (event) => handleKeyPress(createEvent("k")));

  /**
   * &lt;p>Appends an event listener for events whose type attribute value is change.&lt;br>
   * The {@link handleKeyPress callback} argument sets the callback that will be invoked when
   * the event is dispatched.&lt;/p>
   *
   * @event change - executed when the mesh checkbox is is checked or unchecked.
   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event
   */
  document
    .getElementById("mesh")
    .addEventListener("change", (event) => handleKeyPress(createEvent("m")));

  /**
   * &lt;p>Appends an event listener for events whose type attribute value is change.&lt;br>
   * The {@link handleKeyPress callback} argument sets the callback that will be invoked when
   * the event is dispatched.&lt;/p>
   *
   * @event change - executed when the stats checkbox is is checked or unchecked.
   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event
   */
  document
    .getElementById("stats")
    .addEventListener("change", (event) => handleKeyPress(createEvent("s")));

  /** &lt;p>Appends an event listener for events whose type attribute value is click.&lt;br>
   * The {@link handleKeyPress callback} argument sets the callback that will be invoked when
   * the event is dispatched.&lt;/p>
   *
   * @event click - reset button: fires after both the mousedown and mouseup events have fired (in that order).
   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/click_event
   */
  document
    .getElementById("reset")
    .addEventListener("click", (event) => handleKeyPress(createEvent("o")));

  const initialModel = models[0];
  getModels(models);
  models.sort();
  setModels(models);
  modelCnt = models.indexOf(initialModel);
  document.getElementById("models").value = modelCnt;
  handleKeyPress(createEvent("k"));
}

/**
 * &lt;p>Sets the {@link init load callback function}.&lt;/p>
 * @param {Event} event load event.
 * @callback WindowLoadCallback
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event load event}
 * @event load
 */
window.addEventListener("load", (event) => {
  init();
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-MeshEdgesGeometry.html">MeshEdgesGeometry</a></li></ul><h3>Externals</h3><ul><li><a href="external-THREE.html">THREE</a></li></ul><h3>Classes</h3><ul><li><a href="external-THREE.AnimationMixer.html">AnimationMixer</a></li><li><a href="external-THREE.BufferAttribute.html">BufferAttribute</a></li><li><a href="external-THREE.BufferGeometry.html">BufferGeometry</a></li><li><a href="external-THREE.Clock.html">Clock</a></li><li><a href="external-THREE.DRACOLoader.html">DRACOLoader</a></li><li><a href="external-THREE.GLTFLoader.html">GLTFLoader</a></li><li><a href="external-THREE.MTLLoader.html">MTLLoader</a></li><li><a href="external-THREE.OBJLoader.html">OBJLoader</a></li><li><a href="external-THREE.Object3D.html">Object3D</a></li><li><a href="external-THREE.PMREMGenerator.html">PMREMGenerator</a></li><li><a href="external-THREE.PerspectiveCamera.html">PerspectiveCamera</a></li><li><a href="external-THREE.STLLoader.html">STLLoader</a></li><li><a href="external-THREE.Scene.html">Scene</a></li><li><a href="external-THREE.Stats.html">Stats</a></li><li><a href="external-THREE.TrackballControls.html">TrackballControls</a></li><li><a href="external-THREE.VTKLoader.html">VTKLoader</a></li><li><a href="external-THREE.WebGLRenderer.html">WebGLRenderer</a></li><li><a href="module-MeshEdgesGeometry-MeshEdgesGeometry.html">MeshEdgesGeometry</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:change-executedwhenthemeshcheckboxisischeckedorunchecked.">change - executed when the mesh checkbox is is checked or unchecked.</a></li><li><a href="global.html#event:change-executedwhenthemodels&lt;select&gt;ischanged.">change - executed when the models &lt;select&gt; is changed.</a></li><li><a href="global.html#event:change-executedwhenthestatscheckboxisischeckedorunchecked.">change - executed when the stats checkbox is is checked or unchecked.</a></li><li><a href="global.html#event:click-resetbutton:firesafterboththemousedownandmouseupeventshavefired(inthatorder).">click - reset button: fires after both the mousedown and mouseup events have fired (in that order).</a></li><li><a href="global.html#event:keydown">keydown</a></li><li><a href="global.html#event:load">load</a></li><li><a href="global.html#event:resize-executedwhenthewindowisresized.">resize - executed when the window is resized.</a></li></ul><h3>Global</h3><ul><li><a href="global.html#aspect">aspect</a></li><li><a href="global.html#colorTable">colorTable</a></li><li><a href="global.html#getModels">getModels</a></li><li><a href="global.html#handleKeyPress">handleKeyPress</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#loadModel">loadModel</a></li><li><a href="global.html#modelCnt">modelCnt</a></li><li><a href="global.html#models">models</a></li><li><a href="global.html#runAnimation">runAnimation</a></li><li><a href="global.html#setAnimationLoop">setAnimationLoop</a></li><li><a href="global.html#setModels">setModels</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Aug 13 2024 19:15:26 GMT-0300 (Brasilia Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
