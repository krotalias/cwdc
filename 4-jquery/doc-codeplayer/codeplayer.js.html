<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: codeplayer.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: codeplayer.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file
 *
 * Summary.
 * &lt;p>Codeplayer is a sandbox for writing HTML/CSS/JAVASCRIPT code.&lt;/p>
 *
 *  Description.
 *  &lt;p>There are three panels (textarea) to input the code
 *     and a fourth output panel (iframe) to display the result.&lt;/p>
 * &lt;ul>
 *  &lt;li> HTML panel&lt;/li>
 *  &lt;li> CSS panel. &lt;/li>
 *  &lt;li> Javascript panel.&lt;/li>
 *  &lt;li> Output panel.&lt;/li>
 * &lt;/ul>
 *
 *  &lt;pre>
 *  Documentation:
 *  - Ubuntu:
 *     - sudo apt install jsdoc-toolkit
 *  - MacOS:
 *     - sudo port install npm8 (or npm9)
 *     - sudo npm install -g jsdoc
 *  - jsdoc -d doc-codeplayer codeplayer.js
 *  &lt;/pre>
 *
 *  @see &lt;a href="/cwdc/4-jquery/4.15.html">link&lt;/a>
 *  @see &lt;a href="/cwdc/4-jquery/codeplayer.js">source&lt;/a>
 *  @author Paulo Roma Cavalcanti
 *  @since 20/01/2021
 */

/** Create a page with the html and css from the first two panels and run it on the iframe panel. &lt;br>
 *  Then, inject javascript code from the javascript panel (to modify the html from the htmlPanel)
 *  into the iframe.
 *
 *  &lt;p>The eval() function evaluates JavaScript code represented as a string (dangerous!).&lt;/p>
 *  &lt;ul>
 *      &lt;li>$("#javascriptPanel").val() -> "document.getElementById(\"paragraph\").innerHTML = \"Hello World!\";"
 *      &lt;li>eval() -> "Hello My World!"
 *  &lt;/ul>
 *
 *  @see https://api.jquery.com/contents/
 *  @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval
 */
function updateOutput() {
  $("iframe")
    .contents()
    .find("html")
    .html(
      "&lt;html>&lt;head>&lt;style type='text/css'>" +
        $("#cssPanel").val() + // get the code in cssPanel
        "&lt;/style>&lt;/head>&lt;body>" +
        $("#htmlPanel").val() + // get the code in htmlPanel
        "&lt;/body>&lt;/html>"
    );

  // Inject javascript code.
  document
    .getElementById("outputPanel")
    .contentWindow.eval($("#javascriptPanel").val());
}

/**  @name hover
 *   @function
 *
 *   @description
 *   Bind one or two handlers to the matched elements, to be executed
 *   when the mouse pointer enters and leaves the elements.
 *
 *   @see https://api.jquery.com/hover/
 */
$(".toggleButton").hover(
  function () {
    $(this).addClass("highlightedButton");
  },
  function () {
    $(this).removeClass("highlightedButton");
  }
);

/** @name anonymous function
 *  @function
 *
 *  @description
 *  Define the callbacks for the events of page load and page resize,
 *  so the size of the browser viewport is continuously displayed on screen.
 */
(function () {
  window.onresize = displayWindowSize;
  window.onload = displayWindowSize;

  /** @name displayWindowSize
   *  @function
   *
   *  @description
   *  Display the size of the browser window.
   *
   *  &lt;p>The innerWidth is width (in pixels) of the browser window viewport including,
   *  if rendered, the vertical scrollbar.&lt;/p>
   *
   *  &lt;p>The outerWidth property returns the outer width of the browser window
   *  (width of the client window),
   *  including all interface elements (like toolbars/scrollbars).&lt;/p>
   *
   *  Therefore outerWidth can be less than innerWidth when your page is just
   *  zoomed in, or page view is scaled up.
   *
   *  &lt;p>Uses an ID "screen" to display the values.&lt;/p>
   *  &lt;ul>
   *      &lt;li> document.getElementById("screen").innerHTML = "(" + iWidth + " &amp;times; " + iHeight + ")";
   *  &lt;/ul>
   */
  function displayWindowSize() {
    let iWidth = window.innerWidth;
    let iHeight = window.innerHeight;
    let oWidth = window.outerWidth;
    let oHeight = window.outerHeight;
    $("#screen").html(
      `(${iWidth} &amp;times; ${iHeight}) - (${oWidth} &amp;times; ${oHeight})`
    );
  }
})();

/** Textarea background color. */
var txtbgcolor = "antiquewhite";

var previousId = "html";
/** A global CSS variable holding the textarea color.
 * The variable can be accessed using DOM:
 * &lt;ul>
 *    &lt;li>getComputedStyle(document.querySelector(':root')).getPropertyValue('--txtcolor');
 * &lt;/ul>
 *
 * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector
 */
var txtcolor = $(":root").css("--txtcolor");

/** Associate a button id to its corresponding panel #id selector.
 */
var panels = [];
panels["html"] = "#htmlPanel";
panels["css"] = "#cssPanel";
panels["javascript"] = "#javascriptPanel";
panels["output"] = "#outputPanel";

/** @name click
 *  @function
 *
 *  @description
 *  Callback for a button click event.
 *
 *  &lt;p>If the output button is clicked, the initial iframe contents is reloaded.&lt;/p>
 *
 *  Going back to the inital page after following an external link,
 *  generates a cross-origin error.&lt;br>
 *  It is necessary to load a blank page to reset the iframe element, which
 *  can be accomplished this way:
 *  &lt;ul>
 *     &lt;li> document.getElementById("outputPanel").src = "about:blank";
 *  &lt;/ul>
 *
 *  @see https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy
 *  @see https://api.jquery.com/toggleclass/
 */
$(".toggleButton").click(function () {
  // change the color of the clicked button.
  $(this).toggleClass("active");
  // remove highlight of the clicked button.
  $(this).removeClass("highlightedButton");
  // Button id: html, css, javascript or output
  var panelId = $(this).attr("id");
  // hide or show the clicked panel.
  $(panels[panelId]).toggleClass("hidden");

  if (panelId != "output") {
    $(panels[previousId]).css("background-color", txtcolor);

    if ($(panels[panelId]).hasClass("hidden")) {
      for (var key in panels) {
        // look for the first visible panel
        if (!$(panels[key]).hasClass("hidden")) {
          $(panels[key]).css("background-color", txtbgcolor);
          $(panels[key]).select();
          $(panels[key]).focus();
          previousId = key;
          break;
        }
      }
    } else {
      $(panels[panelId]).css("background-color", txtbgcolor);
      $(panels[panelId]).select();
      $(panels[panelId]).focus();
      previousId = panelId;
    }
  } else {
    if (!$(panels[panelId]).hasClass("hidden")) updateOutput();
    else $("iframe").attr("src", "about:blank");
  }
  // visible panels = number of panels less the number of hidden panels.
  var numberOfActivePanels = 4 - $(".hidden").length;

  // set the width of the remaining panels.
  $(".panel").width($(window).width() / numberOfActivePanels - 10);
});

$(".panel").height($(window).height() - $("#header").height() - 15);

// initially, there are only two panels
$(".panel").width($(window).width() / 2 - 10);

// select the first panel.
$(panels["html"]).css("background-color", txtbgcolor);

updateOutput();

// If text is changed, or pasted something, into any textarea.
$("textarea").on("change keyup paste", function () {
  updateOutput();
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#anonymousfunction">anonymous function</a></li><li><a href="global.html#click">click</a></li><li><a href="global.html#displayWindowSize">displayWindowSize</a></li><li><a href="global.html#hover">hover</a></li><li><a href="global.html#panels">panels</a></li><li><a href="global.html#txtbgcolor">txtbgcolor</a></li><li><a href="global.html#txtcolor">txtcolor</a></li><li><a href="global.html#updateOutput">updateOutput</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Aug 23 2023 22:27:03 GMT-0300 (Brasilia Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
